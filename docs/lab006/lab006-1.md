# Using Persistent Storage - MongoDB and NodeJS

In production Kubernetes clusters, many applications are *stateful* - their data needs to persist even if their pods regenerate or scale up/down. In this lab, you will see how this is achieved using PersistentVolumes (PV) and PersistentVolumeClaims (PVC).

OpenShift on IBM Z supports various types of persistent storage, including Spectrum Scale, OpenShift Data Foundation, and NFS, which is what we will use in this lab. In this OpenShift cluster, there is a Dynamic Provisioner installed which automatically creates PersistentVolumes and their required NFS paths whenever a PersistentVolumeClaim is created. This provides a more hands-off approach for OpenShift developers and administrators so that nobody needs to manually create a PV or do anything in the external NFS server. 

![nfs-arch](../images/nfs-arch.png)

In this lab, you will deploy an application consisting of two components, a containerized *Node.js web application* and a containerized *MongoDB* instance, which you will back with persistent storage. Using the Node.js web application, you will be able to query the database, as well as insert new data into it.

![app-arch](../images/app-arch.png)

To deploy the Node.js application, you will build and run the container from a Dockerfile residing in a GitHub repository.

To deploy MongoDB, you will pull a MongoDB image from <quay.io> and run it. The image in quay.io is the official MongoDB container image pulled from Docker Hub and moved to the Quay registry. This was done simply because Dockerhub has rate limits on pull requests from their public repository.
